package com.javing.html;

import java.io.IOException;

import org.apache.http.HttpEntity;
import org.apache.http.ParseException;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class JsoupTest {

	public static void main(String[] args){
		CloseableHttpClient client = HttpClients.createDefault(); // like a client
		HttpGet get = new HttpGet("http://www.baidu.com"); // Request a url by get
		CloseableHttpResponse resp = null;
		try {
			resp = client.execute(get);
		} catch (ClientProtocolException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		} 
		Document doc = null;
		try {
			HttpEntity entity = resp.getEntity(); // get entity of resp
			doc = Jsoup.parse(EntityUtils.toString(entity)); // Jsoup String html
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} 
		Elements eles = doc.select("a[name=tj_trmap]"); //  finds links (a tags with href attributes and value = tj_trmap)
		for (Element ele : eles) {
			System.out.println("attr:" + ele.attr("href"));
			System.out.println("absUrl:" + ele.absUrl("href"));
		}
	}
}
